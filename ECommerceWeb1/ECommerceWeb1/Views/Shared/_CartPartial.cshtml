@model List<ECommerceProject.Entities.Concrete.CartItem>

@if (Model == null || !Model.Any())
{
    <div class="alert alert-info text-center mt-3">
        Sepetiniz boş.
    </div>
}
else
{
    <table class="table table-hover table-bordered mt-3">
        <thead class="table-light">
            <tr>
                <th scope="col">Ürün</th>
                <th scope="col" style="width:100px;">Fiyat</th>
                <th scope="col" style="width:100px;">Adet</th>
                <th scope="col" style="width:130px;">İşlem</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        <strong>@(item.Product?.Name ?? "Bilinmeyen Ürün")</strong><br />
                        <small class="text-muted">@(item.Product?.Description?.Length > 30 ? item.Product.Description.Substring(0, 30) + "..." : item.Product?.Description)</small>
                    </td>
                    <td class="align-middle">
                        @item.UnitPrice.ToString("C", new System.Globalization.CultureInfo("tr-TR"))
                    </td>
                    <td class="align-middle text-center">
                        @item.Quantity
                    </td>
                    <td class="align-middle text-center">
                        <div class="btn-group btn-group-sm" role="group">
                            <a href="@Url.Action("DecreaseQuantity", "Home", new { id = item.ProductId })"
                               class="btn btn-outline-secondary" title="Azalt">-</a>
                            <a href="@Url.Action("IncreaseQuantity", "Home", new { id = item.ProductId })"
                               class="btn btn-outline-secondary" title="Arttır">+</a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <div class="d-flex justify-content-between align-items-center mt-3">
        <strong>Toplam Tutar:</strong>
        <span class="fs-5 fw-bold text-primary">
            @Model.Sum(x => x.TotalPrice).ToString("C", new System.Globalization.CultureInfo("tr-TR"))
        </span>
    </div>

    <div class="mt-3 text-end">
        <a href="@Url.Action("ClearCart", "Home")" class="btn btn-danger btn-sm" onclick="return confirm('Sepeti temizlemek istediğinize emin misiniz?');">
            Sepeti Temizle
        </a>
    </div>
}
